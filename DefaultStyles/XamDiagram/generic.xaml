<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:ig="http://schemas.infragistics.com/xaml"
  xmlns:local="http://schemas.infragistics.com/xaml"
  xmlns:localPrim="http://schemas.infragistics.com/xaml/primitives"
  xmlns:system="clr-namespace:System;assembly=mscorlib"
  xmlns:ComponentModel="clr-namespace:System.ComponentModel;assembly=WindowsBase">

    <localPrim:DiagramNodeOptionsVisibilityConverter x:Key="nodeOptionsVisibilityConverter" />
    <localPrim:DiagramConnectionOptionsVisibilityConverter x:Key="connectionOptionsVisibilityConverter" />
    <localPrim:SolidColorBrushToColorConverter x:Key="brushToColorConverter" />
    <localPrim:DoubleCollectionToStringConverter x:Key="dashArrayConverter" />
    <localPrim:DiagramConnectionCapTypeToSizeConverter x:Key="capTypeToSizeConverter" />
    <localPrim:DiagramConnectionTypeConverter x:Key="connectionTypeConverter" />
    <localPrim:FallbackFontFamilyConverter x:Key="fontFamilyConverter" />
    <BooleanToVisibilityConverter x:Key="boolToVisibilityConverter" />
    <local:DiagramStringSettings x:Key="stringResources" />

    <Geometry x:Key="ExclamationIcon">M 0 5 L 2 5 L 2 0 L 0 0 L 0 5 ZM 0 8 L 2 8 L 2 6 L 0 6 L 0 8 Z</Geometry>

    <!-- Brushes -->
    <SolidColorBrush x:Key="ZOrderRectangleDarkBorderBrush" Color="#FF808080" />
    <SolidColorBrush x:Key="ZOrderRectangleLightBorderBrush" Color="#FFFFFFFF" />

    <SolidColorBrush x:Key="ToolBoxForegroundBrush" Color="#FFFFFFFF" />
    <SolidColorBrush x:Key="ToolBoxBackgroundBrush" Color="#FF2B579A" />
    <SolidColorBrush x:Key="ToolBoxBorderBrush" Color="#FFB2BCC5" />

    <SolidColorBrush x:Key="MainDiagramBackgroundBrush" Color="#FFFFFFFF" />

    <SolidColorBrush x:Key="DiagramNodeBorderBrush" Color="#FF2B579A" />
    <SolidColorBrush x:Key="DiagramNodeBackgroundBrush" Color="#FF487DCC" />
    <SolidColorBrush x:Key="DiagramNodeForegroundBrush" Color="#FFFFFF" />

    <SolidColorBrush x:Key="DiagramConnectionStrokeBrush" Color="#FF487DCC" />
    <SolidColorBrush x:Key="DiagramConnectionFillBrush" Color="#FF487DCC" />
    <SolidColorBrush x:Key="DiagramConnectionForegroundBrush" Color="#FF2B579A" />

    <SolidColorBrush x:Key="ExpanderHeaderBackgroundBrush" Color="#FFF0F0F0" />
    <SolidColorBrush x:Key="ExpanderHeaderHoverBackgroundBrush" Color="#FFD7E0F7" />
    <SolidColorBrush x:Key="ExpanderArrowBackgroundBrush" Color="#FF333333"/>
    <SolidColorBrush x:Key="ExpanderDisabledArrowBackgroundBrush" Color="#FF707070"/>

    <SolidColorBrush x:Key="ZOrderBigRectangleBackgroundBrush" Color="#FF808080" />
    <SolidColorBrush x:Key="ZOrderSmallRectangleBackgroundBrush" Color="#FFFFFFFF" />
    <!-- End Brushes -->

    <Style x:Key="ExpanderHeaderFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border>
                        <Rectangle Margin="0" SnapsToDevicePixels="true" Stroke="Black" StrokeThickness="1" StrokeDashArray="1 2"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="ExpanderDownHeaderStyle" TargetType="{x:Type ToggleButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border Padding="{TemplateBinding Padding}">
                        <Border x:Name="Bg" Background="{StaticResource ExpanderHeaderBackgroundBrush}">
                            <Grid Background="Transparent" Height="24" SnapsToDevicePixels="False" Margin="4,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="19" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Path x:Name="arrow" Width="4" Height="7" Data="M0,0 L0,7 L4,3.5 z" HorizontalAlignment="Center" SnapsToDevicePixels="false" Fill="{StaticResource ExpanderArrowBackgroundBrush}" VerticalAlignment="Center" />
                                <ContentPresenter Grid.Column="1" TextBlock.FontWeight="SemiBold" HorizontalAlignment="Left" Margin="4,0,0,0" RecognizesAccessKey="True" SnapsToDevicePixels="True" VerticalAlignment="Center" />
                            </Grid>
                        </Border>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="Data" TargetName="arrow" Value="M0,0 L7,0 L3.5,4 z"/>
                            <Setter Property="Width" TargetName="arrow" Value="7"/>
                            <Setter Property="Height" TargetName="arrow" Value="4"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Background" TargetName="Bg" Value="{StaticResource ExpanderHeaderHoverBackgroundBrush}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Stroke" TargetName="arrow" Value="{StaticResource ExpanderDisabledArrowBackgroundBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="ExpanderStyle" TargetType="{x:Type Expander}">
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1,0" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Expander}">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
                  Background="{TemplateBinding Background}" CornerRadius="3" SnapsToDevicePixels="true">
                        <DockPanel>
                            <ToggleButton x:Name="HeaderSite" ContentTemplate="{TemplateBinding HeaderTemplate}"
                            ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}" Content="{TemplateBinding Header}" 
                            DockPanel.Dock="Top" Foreground="{TemplateBinding Foreground}" FontWeight="{TemplateBinding FontWeight}" 
                            FocusVisualStyle="{StaticResource ExpanderHeaderFocusVisual}" FontStyle="{TemplateBinding FontStyle}" 
                            FontStretch="{TemplateBinding FontStretch}" FontSize="{TemplateBinding FontSize}" 
                            FontFamily="{TemplateBinding FontFamily}" 
                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                            IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                            Margin="1" MinWidth="0" MinHeight="0" Padding="{TemplateBinding Padding}" 
                            Style="{StaticResource ExpanderDownHeaderStyle}" 
                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            <StackPanel DockPanel.Dock="Bottom">
                                <ContentPresenter x:Name="ExpandSite" Focusable="false" 
                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}"
                                  Visibility="Collapsed" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                            </StackPanel>
                        </DockPanel>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsExpanded" Value="true">
                            <Setter Property="Visibility" TargetName="ExpandSite" Value="Visible"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <ObjectDataProvider x:Key="capTypeEnum" MethodName="GetValues"
                        ObjectType="{x:Type system:Enum}">
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="local:DiagramConnectionCapType"/>
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>

    <ResourceDictionary x:Key="NodeShapes">
        <EllipseGeometry x:Key="EllipseNodeGeometry" Center="50,50" RadiusX="50" RadiusY="50" />
        <RectangleGeometry x:Key="RectangleNodeGeometry" Rect="0 0 100 100"/>
        <RectangleGeometry x:Key="RoundedRectangleNodeGeometry" Rect="0 0 120 80" RadiusX="5" RadiusY="5"/>
        <PathGeometry x:Key="TriangeNodeGeometry">
            <PathFigure StartPoint="50, 0" IsFilled="True" IsClosed="True">
                <LineSegment Point="0, 100"/>
                <LineSegment Point="100, 100"/>
            </PathFigure>
        </PathGeometry>
        <PathGeometry x:Key="RightTriangeNodeGeometry">
            <PathFigure StartPoint="0, 0" IsFilled="True" IsClosed="True">
                <LineSegment Point="0, 100"/>
                <LineSegment Point="100, 100"/>
            </PathFigure>
        </PathGeometry>
        <PathGeometry x:Key="RightTriangeMirroredNodeGeometry">
            <PathFigure StartPoint="100, 0" IsFilled="True" IsClosed="True">
                <LineSegment Point="0, 100"/>
                <LineSegment Point="100, 100"/>
            </PathFigure>
        </PathGeometry>
        <PathGeometry x:Key="RhombusNodeGeometry">
            <PathFigure StartPoint="0, 50" IsFilled="True" IsClosed="True">
                <LineSegment Point="50, 0"/>
                <LineSegment Point="100, 50"/>
                <LineSegment Point="50, 100"/>
            </PathFigure>
        </PathGeometry>
        <PathGeometry x:Key="OctagonNodeGeometry">
            <PathFigure StartPoint="30, 0" IsFilled="True" IsClosed="True">
                <LineSegment Point="70, 0"/>
                <LineSegment Point="100, 30"/>
                <LineSegment Point="100, 70"/>
                <LineSegment Point="70, 100"/>
                <LineSegment Point="30, 100"/>
                <LineSegment Point="0, 70"/>
                <LineSegment Point="0, 30"/>
            </PathFigure>
        </PathGeometry>
        <PathGeometry x:Key="ChevronNodeGeometry">
            <PathFigure StartPoint="0, 0" IsFilled="True" IsClosed="True">
                <LineSegment Point="50, 0"/>
                <LineSegment Point="100, 50"/>
                <LineSegment Point="50, 100"/>
                <LineSegment Point="0, 100"/>
                <LineSegment Point="50, 50"/>
            </PathFigure>
        </PathGeometry>

        <PathGeometry x:Key="HexagonNodeGeometry">
            <PathFigure StartPoint="0, 50" IsFilled="True" IsClosed="True">
                <LineSegment Point="25, 0"/>
                <LineSegment Point="75, 0"/>
                <LineSegment Point="100, 50"/>
                <LineSegment Point="75, 100"/>
                <LineSegment Point="25, 100"/>
            </PathFigure>
        </PathGeometry>

        <PathGeometry x:Key="PentagonNodeGeometry">
            <PathFigure StartPoint="50, 0" IsClosed="True">
                <PathFigure.Segments>
                    <LineSegment Point="100, 40" />
                    <LineSegment Point="80, 100" />
                    <LineSegment Point="20, 100" />
                    <LineSegment Point="0, 40" />
                </PathFigure.Segments>
            </PathFigure>
        </PathGeometry>

        <PathGeometry x:Key="HeptagonNodeGeometry">
            <PathFigure StartPoint="50, 0" IsClosed="True">
                <PathFigure.Segments>
                    <LineSegment Point="90, 19" />
                    <LineSegment Point="100, 62" />
                    <LineSegment Point="73, 100" />
                    <LineSegment Point="27, 100" />
                    <LineSegment Point="0, 62" />
                    <LineSegment Point="10, 19" />
                </PathFigure.Segments>
            </PathFigure>
        </PathGeometry>

        <PathGeometry x:Key="CrossNodeGeometry">
            <PathFigure StartPoint="0,33" IsClosed="True">
                <PathFigure.Segments>
                    <LineSegment Point="33,33" />
                    <LineSegment Point="33,0" />
                    <LineSegment Point="66,0" />
                    <LineSegment Point="66,33" />
                    <LineSegment Point="99,33" />
                    <LineSegment Point="99,66" />
                    <LineSegment Point="66,66" />
                    <LineSegment Point="66,99" />
                    <LineSegment Point="33,99" />
                    <LineSegment Point="33,66" />
                    <LineSegment Point="0,66" />
                </PathFigure.Segments>
            </PathFigure>
        </PathGeometry>

        <PathGeometry x:Key="ThinCrossNodeGeometry">
            <PathFigure StartPoint="0,44" IsClosed="True">
                <PathFigure.Segments>
                    <LineSegment Point="44,44" />
                    <LineSegment Point="44,0" />
                    <LineSegment Point="55,0" />
                    <LineSegment Point="55,44" />
                    <LineSegment Point="99,44" />
                    <LineSegment Point="99,55" />
                    <LineSegment Point="55,55" />
                    <LineSegment Point="55,99" />
                    <LineSegment Point="44,99" />
                    <LineSegment Point="44,55" />
                    <LineSegment Point="0,55" />
                </PathFigure.Segments>
            </PathFigure>
        </PathGeometry>

    </ResourceDictionary>

    <!-- *********************************  Default Error Template  ********************************* -->
    <ResourceDictionary x:Key="DiagramResources">
        <ControlTemplate x:Key="EditorErrorTemplate">
            <DockPanel LastChildFill="true">
                <Border Background="Red" DockPanel.Dock="right" Margin="10,0,0,0"/>
                   
                <AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
                    <Border BorderBrush="Red" BorderThickness="1" 
                            ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                <Border.Resources>
                    <Style TargetType="ToolTip">
                        <Setter Property="Background" Value="Red" />
                        <Setter Property="BorderBrush" Value="Red" />
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="Padding" Value="6 2 6 3" />
                    </Style>
            </Border.Resources>
                        <Grid HorizontalAlignment="Right" Margin="0 0 -1 0">
                            <Border Width="{Binding Path=ActualHeight, RelativeSource={RelativeSource Self}}"
                                    Background="Red"/>
                            <Path Stretch="Fill" Width="2" Height="8"
                                  Data="{StaticResource ExclamationIcon}"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Center"
                                  Fill="White"/>
                        </Grid>
                    </Border>
                </AdornedElementPlaceholder>
            </DockPanel>
        </ControlTemplate>
        <ControlTemplate x:Key="DisplayErrorTemplate">
            <DockPanel LastChildFill="true">
                <Border Background="Red" DockPanel.Dock="right" Margin="10,0,0,0" />
                    
                <AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
                    <Border BorderBrush="Red" BorderThickness="1" 
                             ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                <Border.Resources>
                    <Style TargetType="ToolTip">
                        <Setter Property="Background" Value="Red" />
                        <Setter Property="BorderBrush" Value="Red" />
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="Padding" Value="6 2 6 3" />
                    </Style>
            </Border.Resources>
                        <Grid HorizontalAlignment="Right" Margin="0 0 -1 0">
                            <Border Width="{Binding Path=ActualHeight, RelativeSource={RelativeSource Self}}" Background="Red"/>
                            <Path Stretch="Fill" Width="2" Height="8"
                                  Data="{StaticResource ExclamationIcon}"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Center"
                                  Fill="White"/>
                        </Grid>
                    </Border>
                </AdornedElementPlaceholder>
            </DockPanel>
        </ControlTemplate>
    </ResourceDictionary> 
    
    <DataTemplate x:Key="NodeContentTemplate">
        <TextBlock Margin="5 3" Text="{Binding Mode=OneWay}" TextWrapping="Wrap" TextAlignment="Center"/>
    </DataTemplate>

    <Style TargetType="local:DiagramNode">
        <Setter Property="FocusVisualStyle">
            <Setter.Value>
                <Style>
                    <Setter Property="Control.Template">
                        <Setter.Value>
                            <ControlTemplate>
                                <Grid RenderOptions.EdgeMode="Aliased">
                                    <Rectangle StrokeThickness="1"
                                          Margin="-7"
                                          Stroke="White"/>
                                    <Rectangle StrokeThickness="1"
                                          Margin="-7"
                                          Stroke="Gray"
                                          StrokeDashArray="1 2"/>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Fill" Value="{StaticResource DiagramNodeBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource DiagramNodeForegroundBrush}"/>
        <Setter Property="Stroke" Value="{StaticResource DiagramNodeBorderBrush}"/>
        <Setter Property="StrokeThickness" Value="1"/>
        <Setter Property="DisplayTemplate" Value="{StaticResource NodeContentTemplate}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:DiagramNode" Resources="{StaticResource NodeShapes}">
                    <Grid>
                        <Grid x:Name="ShapePanel"/>
                        <Grid x:Name="ContentPanel" />
                        <Grid x:Name="EditPanel" Visibility="Collapsed" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <DataTemplate x:Key="ConnectionContentTemplate">
        <TextBlock Text="{Binding Mode=OneWay}" TextWrapping="Wrap" TextAlignment="Center"/>
    </DataTemplate>

    <Style TargetType="local:DiagramConnection">
        <Setter Property="FocusVisualStyle">
            <Setter.Value>
                <Style>
                    <Setter Property="Control.Template">
                        <Setter.Value>
                            <ControlTemplate>
                                <Grid RenderOptions.EdgeMode="Aliased">
                                    <Rectangle StrokeThickness="1"
                                          Margin="-7"
                                          Stroke="White"/>
                                    <Rectangle StrokeThickness="1"
                                          Margin="-7"
                                          Stroke="Gray"
                                          StrokeDashArray="1 2"/>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Stroke" Value="{StaticResource DiagramConnectionStrokeBrush}" />
        <Setter Property="Fill" Value="{StaticResource DiagramConnectionFillBrush}" />
        <Setter Property="EndCapType" Value="FilledArrow" />
        <Setter Property="Foreground" Value="{StaticResource DiagramConnectionForegroundBrush}"/>
        <Setter Property="StrokeThickness" Value="1"/>
        <Setter Property="Cursor" Value="Arrow"/>
        <Setter Property="DisplayTemplate" Value="{StaticResource ConnectionContentTemplate}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:DiagramConnection">
                    <Grid>
                        <Grid x:Name="ShapePanel">
                            <Canvas x:Name="ConnectionCanvas">
                                <Path x:Name="UnderlayPath"
                                      Stroke="Transparent"
                                      StrokeThickness="10"/>
                            </Canvas>
                            <Path x:Name="ShapePath" StrokeDashCap="Round"/>
                        </Grid>
                            <Grid x:Name="RootContentPanel" HorizontalAlignment="Left" VerticalAlignment="Top">
                                <Grid x:Name="ContentPanel">
                                    <Rectangle Fill="{Binding Background, RelativeSource={RelativeSource AncestorType=local:XamDiagram}}"/>
                                    <localPrim:DiagramItemContentPresenter x:Name="ContentPresenter"/>
                                </Grid>
                                <Grid x:Name="EditPanel" Visibility="Collapsed" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                            </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:XamDiagram">
        <Setter Property="MinHeight" Value="50"/>
        <Setter Property="MinWidth" Value="50"/>
        <Setter Property="Background" Value="{StaticResource MainDiagramBackgroundBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:XamDiagram" Resources="{StaticResource DiagramResources}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <ig:DragDropManager.DropTarget>
                            <ig:DropTarget IsDropTarget="True" />
                        </ig:DragDropManager.DropTarget>
                        <Grid>
                            <Grid x:Name="MainGrid">
                                <localPrim:DrawingPanel x:Name="DrawingPanel"></localPrim:DrawingPanel>
                            </Grid>
                            <Grid>
                                <Canvas x:Name="ConnectionPointsLayer"/>
                                <Canvas x:Name="HandlesLayer">
                                    <Rectangle x:Name="SelectionRectangle" 
                                               Stroke="Gray"
                                               StrokeDashArray="2 2"
                                               StrokeThickness="1"
                                               Visibility="Collapsed"
                                               SnapsToDevicePixels="True"/>
                                </Canvas>
                                <Canvas>
                                    <Rectangle x:Name="DragRectangle" 
                                               Visibility="Collapsed"
                                               Stroke="Black" 
                                               StrokeThickness="1"
                                               StrokeDashArray="3, 3"></Rectangle>
                                    <Path x:Name="PreviewPath" 
                                          Visibility="Collapsed"
                                          Fill="#99D9D9D9"></Path>
                                    <Button x:Name="OptionsPaneButton" Visibility="Collapsed"
                                        Command="local:DiagramCommands.ShowOptionsPane"
                                        Cursor="Arrow"
                                        CommandTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">

                                        <Path Stretch="Fill" Width="20" Height="20"
                                            Margin="2"
                                            Data="M 24.03515625,13.4814453125 C24.03515625,13.4814453125 24.03515625,10.47265625 24.03515625,10.47265625 24.03515625,10.47265625 20.4541015625,9.8876953125 20.4541015625,9.8876953125 20.2421875,9.0390625 19.9091796875,8.2421875 19.47021484375,7.51171875 19.47021484375,7.51171875 21.5576171875,4.53662109375 21.5576171875,4.53662109375 21.5576171875,4.53662109375 19.4296875,2.40966796875 19.4296875,2.40966796875 19.4296875,2.40966796875 16.4931640625,4.521484375 16.4931640625,4.521484375 15.7607421875,4.078125 14.958984375,3.74072265625 14.1044921875,3.52783203125 14.1044921875,3.52783203125 13.48046875,-0.0361328125 13.48046875,-0.0361328125 13.48046875,-0.0361328125 10.4716796875,-0.0361328125 10.4716796875,-0.0361328125 10.4716796875,-0.0361328125 9.8916015625,3.51611328125 9.8916015625,3.51611328125 9.03662109375,3.7255859375 8.23095703125,4.05908203125 7.49658203125,4.5 7.49658203125,4.5 4.568359375,2.40771484375 4.568359375,2.40771484375 4.568359375,2.40771484375 2.4404296875,4.53466796875 2.4404296875,4.53466796875 2.4404296875,4.53466796875 4.5,7.48095703125 4.5,7.48095703125 4.05517578125,8.2177734375 3.7158203125,9.02392578125 3.5009765625,9.8837890625 3.5009765625,9.8837890625 -0.03515625,10.47265625 -0.03515625,10.47265625 -0.03515625,10.47265625 -0.03515625,13.4814453125 -0.03515625,13.4814453125 -0.03515625,13.4814453125 3.4970703125,14.107421875 3.4970703125,14.107421875 3.7099609375,14.9658203125 4.04931640625,15.77197265625 4.49609375,16.509765625 4.49609375,16.509765625 2.408203125,19.43017578125 2.408203125,19.43017578125 2.408203125,19.43017578125 4.53564453125,21.55859375 4.53564453125,21.55859375 4.53564453125,21.55859375 7.48486328125,19.4931640625 7.48486328125,19.4931640625 8.22119140625,19.93505859375 9.02490234375,20.27099609375 9.8798828125,20.48193359375 9.8798828125,20.48193359375 10.4716796875,24.0361328125 10.4716796875,24.0361328125 10.4716796875,24.0361328125 13.48046875,24.0361328125 13.48046875,24.0361328125 13.48046875,24.0361328125 14.1123046875,20.47216796875 14.1123046875,20.47216796875 14.96337890625,20.25732421875 15.76513671875,19.9189453125 16.4951171875,19.47509765625 16.4951171875,19.47509765625 19.46435546875,21.55859375 19.46435546875,21.55859375 19.46435546875,21.55859375 21.59130859375,19.43017578125 21.59130859375,19.43017578125 21.59130859375,19.43017578125 19.47216796875,16.486328125 19.47216796875,16.486328125 19.9111328125,15.755859375 20.24462890625,14.9580078125 20.4541015625,14.109375 20.4541015625,14.109375 24.03515625,13.4814453125 24.03515625,13.4814453125 zM 12,18.525390625 C8.396484375,18.525390625 5.474609375,15.603515625 5.474609375,12 5.474609375,8.396484375 8.396484375,5.474609375 12,5.474609375 15.603515625,5.474609375 18.525390625,8.396484375 18.525390625,12 18.525390625,15.603515625 15.603515625,18.525390625 12,18.525390625 zM 12,7.0703125 C9.2822265625,7.0703125 7.0703125,9.2822265625 7.0703125,12 7.0703125,14.7177734375 9.2822265625,16.9296875 12,16.9296875 14.7177734375,16.9296875 16.9296875,14.7177734375 16.9296875,12 16.9296875,9.2822265625 14.7177734375,7.0703125 12,7.0703125 zM 11.97607421875,14.078125 C10.82958984375,14.078125 9.89892578125,13.1474609375 9.89892578125,12.0009765625 9.89892578125,10.85302734375 10.82958984375,9.923828125 11.97607421875,9.923828125 13.12353515625,9.923828125 14.05322265625,10.85302734375 14.05322265625,12.0009765625 14.05322265625,13.1474609375 13.12353515625,14.078125 11.97607421875,14.078125 z"
                                            Fill="Gray" />
                                    </Button>
                                    <Popup x:Name="OptionsPanePopup" IsOpen="False"
                                           StaysOpen="False" Focusable="False"
                                           PlacementTarget="{Binding ElementName=OptionsPaneButton}">
                                        <localPrim:DiagramOptionsPane x:Name="DiagramOptionsPane" 
                                                                  Height="220" Width="260"/>
                                    </Popup>
                                </Canvas>
                            </Grid>
                            <ig:XamOverviewPlusDetailPane x:Name="Thumbnail"
                                                          IsZoomable="True"
                                                          Visibility="{TemplateBinding NavigationPaneVisibility}"
                                                          HorizontalAlignment="{TemplateBinding NavigationPaneHorizontalAlignment}"
                                                          VerticalAlignment="{TemplateBinding NavigationPaneVerticalAlignment}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="localPrim:DiagramConnectionHandle">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Background" Value="White"/>
        <Setter Property="BorderBrush" Value="Black"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="UniformHeight" Value="8"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="localPrim:DiagramConnectionHandle">
                    <Rectangle Fill="{TemplateBinding Background}"
                               Stroke="{TemplateBinding BorderBrush}"
                               StrokeThickness="{TemplateBinding BorderThickness}">
                    </Rectangle>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="localPrim:DiagramResizeHandle">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Background" Value="White"/>
        <Setter Property="BorderBrush" Value="Black"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="UniformHeight" Value="8"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="localPrim:DiagramResizeHandle">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="localPrim:DiagramResizeHandleLine">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="UniformHeight" Value="4"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="localPrim:DiagramResizeHandleLine">
                    <Rectangle Fill="Transparent"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="localPrim:DiagramConnectionPointPresenter">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Background" Value="#FF666666"/>
        <Setter Property="HighlightBrush" Value="#22D006"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="localPrim:DiagramConnectionPointPresenter">
                    <Grid Background="Transparent">
                        <Rectangle Margin="4" Width="5" Height="5" Fill="{TemplateBinding Background}" RadiusX="1" RadiusY="1"/>
                        <Rectangle Visibility="{TemplateBinding IsHighlighted, Converter={StaticResource boolToVisibilityConverter}}" 
                                   Width="13" Height="13" StrokeThickness="3" Stroke="{TemplateBinding HighlightBrush}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:DiagramConnectionCapPresenter">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="BorderBrush" Value="#FF666666"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:DiagramConnectionCapPresenter">
                    <Border Background="Transparent" Padding="5">
                        <Path Stroke="{TemplateBinding BorderBrush}">
                            <Path.Data>
                                <EllipseGeometry RadiusX="10" RadiusY="10"/>
                            </Path.Data>
                        </Path>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style TargetType="{x:Type local:XamDiagramToolbox}">
        <Setter Property="MinWidth" Value="150"/>
        <Setter Property="HeaderForeground" Value="{StaticResource ToolBoxForegroundBrush}" />
        <Setter Property="HeaderBackground" Value="{StaticResource ToolBoxBackgroundBrush}"/>
        <Setter Property="HeaderBorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="{StaticResource ToolBoxBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Header" Value="{Binding Source={StaticResource stringResources}, Path=ToolboxHeaderText}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:XamDiagramToolbox}">
                    <Border x:Name="toolboxBorder" 
                            Background="{TemplateBinding Background}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            BorderBrush="{TemplateBinding BorderBrush}">
                        <Grid x:Name="ToolBoxLayout">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Border x:Name="headerBorder"
                                    Background="{TemplateBinding HeaderBackground}"
                                    BorderBrush="{TemplateBinding HeaderBorderBrush}"
                                    BorderThickness="{TemplateBinding HeaderBorderThickness}"
                                    Visibility="{TemplateBinding HeaderVisibility}">
                                <ContentControl Content="{TemplateBinding Header}" Margin="5" Foreground="{TemplateBinding HeaderForeground}" />
                            </Border>

                            <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                                <ItemsControl x:Name="toolBox" ItemsSource="{TemplateBinding Categories}" >
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Vertical"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>

                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Expander Header="{Binding Name, Mode=OneWay}" Style="{StaticResource ExpanderStyle}"
                                                      IsExpanded="{Binding IsExpanded, Mode=OneWay}">
                                                <localPrim:DiagramToolboxCategoryItemsControl ItemsSource="{Binding Items, Mode=OneWay}">
                                                    <localPrim:DiagramToolboxCategoryItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <local:DiagramToolboxItemsPanel/>
                                                        </ItemsPanelTemplate>
                                                    </localPrim:DiagramToolboxCategoryItemsControl.ItemsPanel>
                                                </localPrim:DiagramToolboxCategoryItemsControl>
                                            </Expander>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="DragTemplateStyle" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Rectangle />
                        <ContentPresenter x:Name="contentPresenter" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                  Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                  Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}">
                        </ContentPresenter>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type localPrim:DiagramToolboxCategoryItem}">
        <!--<Setter Property="Height" Value="60" />
        <Setter Property="Width" Value="120" />-->
        <Setter Property="MinHeight" Value="60" />
        <Setter Property="MinWidth" Value="120" />
        <Setter Property="HeaderTemplate">
            <Setter.Value>
                <DataTemplate>
                    <TextBlock Text="{Binding Title, Mode=OneWay}" TextWrapping="Wrap" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type localPrim:DiagramToolboxCategoryItem}">
                    <ControlTemplate.Resources>
                        <DataTemplate x:Key="DragTemplate">
                            <ContentControl Opacity=".72" x:Name="DragPresenter" Content="{Binding Path=Data}"/>
                        </DataTemplate>
                    </ControlTemplate.Resources>
                    <Border x:Name="Border" Margin="2 2 0 0">
                        <Border.Style>
                            <Style>
                                <Setter Property="Border.Background" Value="Transparent"/>
                                <Style.Triggers>
                                    <Trigger Property="Border.IsMouseOver" Value="True">
                                        <Setter Property="Border.Background" Value="#315B81FF" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <Grid x:Name="MainGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Grid>
                                <Rectangle Fill="{TemplateBinding Background}"/>
                                <ContentPresenter Content="{Binding Content, Mode=OneWay}"/>
                            </Grid>
                            <Grid Grid.Column="1">
                                <Rectangle Stroke="{TemplateBinding Background}"/>
                                <ContentPresenter Margin="5" 
                                                  ContentSource="Header" VerticalAlignment="Center" 
                                                  HorizontalAlignment="Left"
                                                  TextBlock.Foreground="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:XamDiagramToolbox}}, Path=Foreground}"/>
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="OptionsPaneTabControl" TargetType="{x:Type TabControl}">
        <Setter Property="Padding" Value="2"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Background" Value="White"/>
        <Setter Property="BorderBrush" Value="#FFACACAC"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabControl}">
                    <Grid x:Name="templateRoot" ClipToBounds="True" SnapsToDevicePixels="True" KeyboardNavigation.TabNavigation="Local">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition x:Name="ColumnDefinition0"/>
                            <ColumnDefinition x:Name="ColumnDefinition1" Width="0"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition x:Name="RowDefinition0" Height="Auto"/>
                            <RowDefinition x:Name="RowDefinition1" Height="*"/>
                        </Grid.RowDefinitions>
                        <TabPanel x:Name="HeaderPanel" Background="Transparent" Grid.Column="0" IsItemsHost="True" Margin="2,2,30,0" Grid.Row="0" KeyboardNavigation.TabIndex="1" Panel.ZIndex="1"/>
                        <Border x:Name="ContentPanel" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.Column="0" KeyboardNavigation.DirectionalNavigation="Contained" Grid.Row="1" KeyboardNavigation.TabIndex="2" KeyboardNavigation.TabNavigation="Local">
                            <ContentPresenter x:Name="PART_SelectedContentHost" ContentTemplate="{TemplateBinding SelectedContentTemplate}" Content="{TemplateBinding SelectedContent}" ContentStringFormat="{TemplateBinding SelectedContentStringFormat}" ContentSource="SelectedContent" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="TabStripPlacement" Value="Bottom">
                            <Setter Property="Grid.Row" TargetName="HeaderPanel" Value="1"/>
                            <Setter Property="Grid.Row" TargetName="ContentPanel" Value="0"/>
                            <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                            <Setter Property="Height" TargetName="RowDefinition1" Value="Auto"/>
                            <Setter Property="Margin" TargetName="HeaderPanel" Value="2,0,2,2"/>
                        </Trigger>
                        <Trigger Property="TabStripPlacement" Value="Left">
                            <Setter Property="Grid.Row" TargetName="HeaderPanel" Value="0"/>
                            <Setter Property="Grid.Row" TargetName="ContentPanel" Value="0"/>
                            <Setter Property="Grid.Column" TargetName="HeaderPanel" Value="0"/>
                            <Setter Property="Grid.Column" TargetName="ContentPanel" Value="1"/>
                            <Setter Property="Width" TargetName="ColumnDefinition0" Value="Auto"/>
                            <Setter Property="Width" TargetName="ColumnDefinition1" Value="*"/>
                            <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                            <Setter Property="Height" TargetName="RowDefinition1" Value="0"/>
                            <Setter Property="Margin" TargetName="HeaderPanel" Value="2,2,0,2"/>
                        </Trigger>
                        <Trigger Property="TabStripPlacement" Value="Right">
                            <Setter Property="Grid.Row" TargetName="HeaderPanel" Value="0"/>
                            <Setter Property="Grid.Row" TargetName="ContentPanel" Value="0"/>
                            <Setter Property="Grid.Column" TargetName="HeaderPanel" Value="1"/>
                            <Setter Property="Grid.Column" TargetName="ContentPanel" Value="0"/>
                            <Setter Property="Width" TargetName="ColumnDefinition0" Value="*"/>
                            <Setter Property="Width" TargetName="ColumnDefinition1" Value="Auto"/>
                            <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                            <Setter Property="Height" TargetName="RowDefinition1" Value="0"/>
                            <Setter Property="Margin" TargetName="HeaderPanel" Value="0,2,2,2"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="TextElement.Foreground" TargetName="templateRoot" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="colorPickerStyle" TargetType="ig:XamColorPicker">
        <Setter Property="CurrentPalette">
            <Setter.Value>
                <ig:ColorPalette>
                    <ig:ColorPalette.Colors>
                        <ig:ColorPatchCollection>
                            <ig:ColorPatch Color="#FFFFFFFF"/>
                            <ig:ColorPatch Color="#FF000000"/>
                            <ig:ColorPatch Color="#FFEEECE1"/>
                            <ig:ColorPatch Color="#FF2B579A"/>
                            <ig:ColorPatch Color="#FF487DCC"/>
                            <ig:ColorPatch Color="#FFC05046"/>
                            <ig:ColorPatch Color="#FF9DBB61"/>
                            <ig:ColorPatch Color="#FFAB9AC0"/>
                            <ig:ColorPatch Color="#FF4BACC6"/>
                            <ig:ColorPatch Color="#FFF59D56"/>
                        </ig:ColorPatchCollection>
                    </ig:ColorPalette.Colors>
                </ig:ColorPalette>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type localPrim:DiagramOptionsPane}">
        <Setter Property="Background" Value="White"></Setter>
        <Setter Property="BorderBrush" Value="#FFACACAC"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type localPrim:DiagramOptionsPane}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid Margin="-1,1,-1,-1">
                            <TabControl Style="{StaticResource OptionsPaneTabControl}">

                                <TabItem Header="{Binding Source={StaticResource stringResources}, Path=ContextMenuGeneralHeaderText}">
                                    <Grid Margin="5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Button Grid.Column="0"
                                                Height="50"
                                                Margin="0,0,2,0"
                                            Command="ApplicationCommands.Cut"
                                            CommandTarget="{TemplateBinding Diagram}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>

                                                <Path Fill="Gray"
                                                      Stretch="Fill"
                                                      Width="20"
                                                      Height="20"
                                                      Data="M331.181,17.579C330.893,17.544 330.429,17.36 330.652,16.693 331.521,14.091 332.782,14.289 333.902,10.585 333.902,10.585 336.502,0.327 336.502,0.327 336.502,0.327 332.272,1.315 330.991,5.399 330.991,5.399 328.634,14.769 327.769,18.76 326.834,23.066 327.61,25.337 330.224,25.647 332.245,25.887 333.63,24.522 333.931,21.996 334.23,19.469 333.202,17.819 331.181,17.579z M329.908,14.159C330.353,14.159 330.713,14.52 330.713,14.963 330.713,15.407 330.353,15.768 329.908,15.768 329.464,15.768 329.104,15.407 329.104,14.963 329.104,14.52 329.464,14.159 329.908,14.159z M332.316,21.804C332.029,24.225 330.815,24.081 330.416,24.033 330.017,23.986 328.802,23.842 329.089,21.421 329.376,19.001 330.591,19.146 330.99,19.192 331.389,19.239 332.604,19.384 332.316,21.804z M335.131,11.503C334.564,13.108 333.969,14.029 333.479,14.742 333.256,15.068 333.05,15.378 332.853,15.747 336.526,15.304 339.254,14.951 339.254,14.951 343.461,14.159 344.942,10.076 344.942,10.076 344.942,10.076 335.131,11.503 335.131,11.503z M327.183,13.326C327.183,11.291 325.664,10.076 323.121,10.076 320.577,10.076 319.058,11.291 319.058,13.326 319.058,15.957 321.221,16.996 325.608,16.576 326.101,16.529 326.521,16.44 327.148,16.373 327.148,16.373 327.724,13.942 327.724,13.942 327.147,14.002 327.183,13.598 327.183,13.326z M323.121,14.951C320.683,14.951 320.683,13.728 320.683,13.326 320.683,12.924 320.683,11.701 323.121,11.701 325.558,11.701 325.558,12.924 325.558,13.326 325.558,13.728 325.558,14.951 323.121,14.951z"></Path>

                                                <TextBlock Grid.Row="1"
                                                           Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuCutCommandText}"></TextBlock>
                                            </Grid>
                                        </Button>
                                        <Button Grid.Column="1"
                                                Height="50"
                                                Margin="2,0,2,0"
                                            Command="ApplicationCommands.Copy"
                                            CommandTarget="{TemplateBinding Diagram}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>

                                                <Path Fill="Gray"
                                                      Stretch="Fill"
                                                      Width="20"
                                                      Height="20"
                                                      Data="M24,53.02L46.68,53.02 46.68,55.02 24,55.02 24,53.02z M24,47.01L37.34,47.01 37.34,49.01 24,49.01 24,47.01z M24,41.01L41.34,41.01 41.34,43.01 24,43.01 24,41.01z M24,35.01L48.01,35.01 48.01,37.01 24,37.01 24,35.01z M24,29.01L37.34,29.01 37.34,31.01 24,31.01 24,29.01z M18,18.01L18,66.02 54.01,66.02 54.01,18.01 18,18.01z M12,12L60.01,12 60.01,72.02 12,72.02 12,12z M2.774E-07,0L48.01,0 48.01,6 48.01,9 42.01,9 42.01,6 6,6 6,54.02 9,54.02 9,60.02 6,60.02 2.774E-07,60.02 2.774E-07,0z"></Path>

                                                <TextBlock Grid.Row="1"
                                                           Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuCopyCommandText}"></TextBlock>
                                            </Grid>
                                        </Button>
                                        <Button Grid.Column="2"
                                                Height="50"
                                                Margin="2,0,2,0"
                                            Command="ApplicationCommands.Paste"
                                            CommandTarget="{TemplateBinding Diagram}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>

                                                <Path Fill="Gray"
                                                      Stretch="Fill"
                                                      Width="20"
                                                      Height="20"
                                                      Data="M12,56.01L46.01,56.01 46.01,58.01 12,58.01 12,56.01z M12,50.01L32,50.01 32,52.01 12,52.01 12,50.01z M12,44.01L38.01,44.01 38.01,46.01 12,46.01 12,44.01z M12,38.01L48.01,38.01 48.01,40.01 12,40.01 12,38.01z M12,32.01L32,32.01 32,34.01 12,34.01 12,32.01z M6,12L6,72.02 54.01,72.02 54.01,12 40.01,12 41.17,15.489C46.689,16.7,48.01,20.05,48.01,24L12,24C12,20.239,13.56,17.03,18.77,15.69L20,12 6,12z M30,3C28.35,3 27,4.34 27,6 27,7.649 28.35,9 30,9 31.66,9 33,7.649 33,6 33,4.34 31.66,3 30,3z M30,0C33.32,0,36.01,2.68,36.01,6L60.01,6 60.01,78.02 -2.184E-07,78.02 -2.184E-07,6 24,6C24,2.68,26.69,0,30,0z"></Path>

                                                <TextBlock Grid.Row="1"
                                                           Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuPasteCommandText}"></TextBlock>
                                            </Grid>
                                        </Button>
                                        <Button Grid.Column="3"
                                                Height="50"
                                                Margin="2,0,0,0"
                                            Command="ApplicationCommands.Delete"
                                            CommandTarget="{TemplateBinding Diagram}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>

                                                <Path Fill="Gray"
                                                      Stretch="Fill"
                                                      Width="20"
                                                      Height="20"
                                                      Data="M89.625,178.75C89.625,178.75 206.375,178.75 206.375,178.75 206.375,178.75 283.375,178.75 283.375,178.75 283.375,178.75 400.375,178.75 400.375,178.75 400.375,178.75 400.375,514.723 400.375,514.723 399.125,525.973 387.875,534.223 379.125,534.223 379.125,534.223 110.625,534.223 110.625,534.223 100.375,534.223 89.625,523.473 89.625,514.473 89.625,514.473 89.625,178.75 89.625,178.75z M311.375,89.75C311.375,89.75 178.625,89.75 178.625,89.75 178.625,89.75 178.625,77.75 178.625,77.75 178.875,76.5 179.125,74.75 179.125,73.5 180.375,59.75 195.625,46.75 205.625,46 207.125,46 208.875,45.75 210.375,45.5 210.375,45.5 279.375,45.5 279.375,45.5 281.125,45.75 282.875,46 284.375,46 297.625,47.25 310.375,64 310.625,73.5 310.625,74.75 311.375,77 311.375,77.75 311.375,77.75 311.375,89.75 311.375,89.75z M467.727,134.25C467.727,134.25 467.727,112 467.727,112 467.727,99.734 457.733,89.75 445.455,89.75 445.455,89.75 356.625,89.75 356.625,89.75 356.625,89.75 356.625,76.5 356.625,76.5 356.625,75.75 355.625,67.75 354.875,64 354.125,60.25 352.875,56.5 351.875,53 351.125,50.5 349.875,48 348.875,45.75 347.625,43.25 346.125,40.75 344.875,38.25 332.375,16.25 308.625,3.75 291.125,1.25 287.625,0.75 283.875,0.5 280.125,0.25 280.125,0.25 209.625,0.25 209.625,0.25 206.125,0.5 202.375,0.75 198.875,1.25 195.625,2 192.125,2.75 189.125,3.5 177.875,6.75 165.125,13.5 154.375,25.5 143.125,37.75 137.375,51.5 134.875,64 134.125,68 133.875,72.5 133.375,76.5 133.375,76.5 133.375,89.75 133.375,89.75 133.375,89.75 44.545,89.75 44.545,89.75 32.267,89.75 22.273,99.734 22.273,112 22.273,112 22.273,134.25 22.273,134.25 22.273,134.25 0,134.25 0,134.25 0,134.25 0,178.75 0,178.75 0,178.75 44.375,178.75 44.375,178.75 44.375,178.75 44.375,517.223 44.375,517.223 44.375,519.723 47.125,532.223 47.375,532.723 48.125,535.223 49.375,538.223 50.625,540.973 52.625,545.223 56.125,550.973 59.875,555.473 69.375,566.723 81.375,572.973 91.375,576.223 95.875,577.723 100.875,578.223 105.375,579.223 105.375,579.223 384.375,579.223 384.375,579.223 385.125,579.223 387.625,578.473 388.875,578.473 399.875,576.973 412.375,571.973 423.625,561.973 433.875,552.723 439.375,541.473 442.625,531.973 444.125,526.973 444.625,521.723 445.625,516.973 445.625,516.973 445.625,178.75 445.625,178.75 445.625,178.75 490,178.75 490,178.75 490,178.75 490,134.25 490,134.25 490,134.25 467.727,134.25 467.727,134.25z M353.75,215.875C350.25,204.875 340.25,200.375 332.5,200.375 322.25,200.375 311.5,207.875 310,220.875 310,220.875 310,491.125 310,491.125 310,496.875 317,508.375 324,509.875 326.5,510.375 330,511.625 332.5,511.625 342.5,511.625 353.5,504.375 355,491.125 355,491.125 355,220.875 355,220.875 355,220.125 354.25,217.125 353.75,215.875z M264.75,215.875C261.25,204.875 251.25,200.375 243.5,200.375 233.25,200.375 222.5,207.875 221,220.875 221,220.875 221,491.125 221,491.125 221,496.875 228,508.375 235,509.875 237.5,510.375 241,511.625 243.5,511.625 253.5,511.625 264.5,504.375 266,490.875 266,490.875 266,220.875 266,220.875 266,220.125 265.25,217.125 264.75,215.875z M175.75,216.125C172.25,204.875 162.25,200.375 154.25,200.375 144.5,200.375 133.25,207.375 132,220.875 132,220.875 132,491.375 132,491.375 132,497.125 138.25,507.875 146,509.875 148.25,510.625 152,511.625 154.5,511.625 164.5,511.625 175.5,504.375 177,490.875 177,490.875 177,221.125 177,221.125 177,220.375 176.25,217.375 175.75,216.125z"></Path>

                                                <TextBlock Grid.Row="1"
                                                           Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuDeleteCommandText}"/>
                                            </Grid>
                                        </Button>

                                        <Rectangle Grid.Row="1" 
                                                   Grid.ColumnSpan="4"
                                                   VerticalAlignment="Center" 
                                                   Margin="5,10" 
                                                   Stroke="LightGray" 
                                                   StrokeThickness="1" />

                                        <Button Grid.Row="2" Grid.Column="0" Height="50" Margin="0,0,2,0" Command="ig:DiagramCommands.BringForward" CommandTarget="{TemplateBinding Diagram}" ToolTip="{Binding Source={StaticResource stringResources}, Path=ContextMenuBringForwardCommandFullText}">
                                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>
                                                <Canvas HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Width="20"
                                                        Height="20"
                                                        Grid.Row="0">
                                                    <Rectangle Fill="{StaticResource ZOrderSmallRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleDarkBorderBrush}" Width="10" Height="10" Canvas.Left="10" Canvas.Top="10" />
                                                    <Rectangle Fill="{StaticResource ZOrderBigRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleLightBorderBrush}" Width="16" Height="16" />
                                                </Canvas>
                                                <TextBlock Grid.Row="1" Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuBringForwardCommandText}" />
                                            </Grid>
                                        </Button>
                                        <Button Grid.Row="2" Grid.Column="1" Height="50" Margin="2,0,2,0" Command="ig:DiagramCommands.SendBackward" CommandTarget="{TemplateBinding Diagram}" ToolTip="{Binding Source={StaticResource stringResources}, Path=ContextMenuSendBackwardCommandFullText}">
                                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>
                                                <Canvas HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Width="20"
                                                        Height="20"
                                                        Grid.Row="0">
                                                    <Rectangle Fill="{StaticResource ZOrderBigRectangleBackgroundBrush}" Width="14" Height="14" />
                                                    <Rectangle Fill="{StaticResource ZOrderRectangleLightBorderBrush}" Width="12" Height="12" Canvas.Left="8" Canvas.Top="8" />
                                                    <Rectangle Fill="{StaticResource ZOrderSmallRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleDarkBorderBrush}" Width="10" Height="10" Canvas.Left="9" Canvas.Top="9" />
                                                </Canvas>
                                                <TextBlock Grid.Row="1" Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuSendBackwardCommandText}" />
                                            </Grid>
                                        </Button>
                                        <Button Grid.Row="2" Grid.Column="2" Height="50" Margin="2,0,2,0" Command="ig:DiagramCommands.BringToFront" CommandTarget="{TemplateBinding Diagram}" ToolTip="{Binding Source={StaticResource stringResources}, Path=ContextMenuBringToFrontCommandFullText}">
                                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>
                                                <Canvas HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Width="20"
                                                        Height="20"
                                                        Grid.Row="0">
                                                    <Rectangle Fill="{StaticResource ZOrderSmallRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleDarkBorderBrush}" Width="8" Height="8" />
                                                    <Rectangle Fill="{StaticResource ZOrderSmallRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleDarkBorderBrush}" Width="8" Height="8" Canvas.Top="12" Canvas.Left="12" />
                                                    <Rectangle Fill="{StaticResource ZOrderBigRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleLightBorderBrush}" Width="14" Height="14" Canvas.Top="3" Canvas.Left="3"/>
                                                </Canvas>
                                                <TextBlock Grid.Row="1" Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuBringToFrontCommandText}" />
                                            </Grid>
                                        </Button>
                                        <Button Grid.Row="2" Grid.Column="3" Height="50" Margin="2,0,0,0" Command="ig:DiagramCommands.SendToBack" CommandTarget="{TemplateBinding Diagram}" ToolTip="{Binding Source={StaticResource stringResources}, Path=ContextMenuSendToBackCommandFullText}">
                                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition></RowDefinition>
                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                </Grid.RowDefinitions>
                                                <Canvas HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Width="20"
                                                        Height="20"
                                                        Grid.Row="0">
                                                    <Rectangle Fill="{StaticResource ZOrderBigRectangleBackgroundBrush}" Width="12" Height="12"  Canvas.Top="4" Canvas.Left="4"/>
                                                    <Rectangle Fill="{StaticResource ZOrderRectangleLightBorderBrush}" Width="9" Height="9"/>
                                                    <Rectangle Fill="{StaticResource ZOrderSmallRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleDarkBorderBrush}" Width="7" Height="7" Canvas.Top="1" Canvas.Left="1" />
                                                    <Rectangle Fill="{StaticResource ZOrderRectangleLightBorderBrush}" Width="9" Height="9" Canvas.Top="11" Canvas.Left="11" />
                                                    <Rectangle Fill="{StaticResource ZOrderSmallRectangleBackgroundBrush}" Stroke="{StaticResource ZOrderRectangleDarkBorderBrush}" Width="7" Height="7" Canvas.Top="12" Canvas.Left="12" />
                                                </Canvas>
                                                <TextBlock Grid.Row="1" Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuSendToBackCommandText}" />
                                            </Grid>
                                        </Button>
                                    </Grid>
                                </TabItem>

                                <TabItem Header="{Binding Source={StaticResource stringResources}, Path=ContextMenuShapeHeaderText}">
                                    <Grid Margin="5">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Margin="0,0,5,5" 
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuShapeFillText}"/>
                                        <ig:XamColorPicker Grid.Row="0" Grid.Column="1"
                                                           Margin="0,0,0,5"
                                                           SelectedColor="{Binding Path=Fill, Converter={StaticResource brushToColorConverter}, Mode=TwoWay}"
                                                           Style="{StaticResource colorPickerStyle}">
                                        </ig:XamColorPicker>

                                        <TextBlock Grid.Row="1" Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Margin="0,0,5,5" 
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuShapeOpacityText}"/>
                                        <Slider Grid.Row="1" Grid.Column="1"
                                                Minimum="0"
                                                Maximum="1"
                                                Value="{Binding Opacity, TargetNullValue=1.1}"
                                                SmallChange="0.01"
                                                LargeChange="0.1"
                                                Margin="0,0,0,5"></Slider>

                                        <TextBlock Margin="0,0,5,5"
                                                       Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="2" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuShapeWidthText}"/>
                                        <ig:XamNumericInput Value="{Binding Width}"
                                                            Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Margin="0,0,0,5"
                                                            Mask="{}{number:0-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Grid.Row="2" Grid.Column="1"
                                                            IsEnabled="{Binding Path=AllowResizeResolved}"></ig:XamNumericInput>

                                        <TextBlock Margin="0,0,5,5"
                                                       Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="3" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuShapeHeightText}"/>
                                        <ig:XamNumericInput Value="{Binding Height}"
                                                            Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Margin="0,0,0,5"
                                                            Mask="{}{number:0-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Grid.Row="3" Grid.Column="1"
                                                            IsEnabled="{Binding Path=AllowResizeResolved}"></ig:XamNumericInput>

                                        <StackPanel Grid.Row="4" Grid.ColumnSpan="2"
                                                    Margin="0,0,5,5"
                                                    Orientation="Horizontal"
                                                    Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}">
                                            <TextBlock VerticalAlignment="Center"
                                                       Text="{Binding Source={StaticResource stringResources}, Path=MaintainAspectRatioText}"/>
                                            <CheckBox IsChecked="{Binding MaintainAspectRatio}"
                                                      VerticalAlignment="Bottom"
                                                      Margin="2,0,0,0"></CheckBox>
                                        </StackPanel>

                                        <TextBlock Margin="0,0,5,5"
                                                       Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="5" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuShapeStartPointXText}"/>
                                        <ig:XamNumericInput Value="{Binding X}"
                                                            Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Mask="{}{number:-999999-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Margin="0,0,0,5"
                                                            Grid.Row="5" Grid.Column="1"></ig:XamNumericInput>

                                        <TextBlock Margin="0,0,5,5"
                                                       Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="6" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuShapeStartPointYText}"/>
                                        <ig:XamNumericInput Value="{Binding Y}"
                                                            Visibility="{Binding Mode, Converter={StaticResource nodeOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Mask="{}{number:-999999-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Margin="0,0,0,5"
                                                            Grid.Row="6" Grid.Column="1"></ig:XamNumericInput>


                                        <TextBlock Margin="0,0,5,5"
                                                        Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="2" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuConnectionStartPointXText}"/>
                                        <ig:XamNumericInput Value="{Binding StartX}"
                                                            Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Mask="{}{number:-999999-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Margin="0,0,0,5"
                                                            Grid.Row="2" Grid.Column="1"></ig:XamNumericInput>

                                        <TextBlock Margin="0,0,5,5"
                                                        Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="3" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuConnectionStartPointYText}"/>
                                        <ig:XamNumericInput Value="{Binding StartY}"
                                                            Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Mask="{}{number:-999999-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Margin="0,0,0,5"
                                                            Grid.Row="3" Grid.Column="1"></ig:XamNumericInput>

                                        <TextBlock Margin="0,0,5,5"
                                                        Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="4" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuConnectionEndPointXText}"/>
                                        <ig:XamNumericInput Value="{Binding EndX}"
                                                            Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Mask="{}{number:-999999-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Margin="0,0,0,5"
                                                            Grid.Row="4" Grid.Column="1"></ig:XamNumericInput>

                                        <TextBlock Margin="0,0,5,5"
                                                        Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                   Grid.Row="5" Grid.Column="0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuConnectionEndPointYText}"/>
                                        <ig:XamNumericInput Value="{Binding EndY}"
                                                            Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}"
                                                            Mask="{}{number:-999999-999999}"
                                                            SpinButtonDisplayMode="Always"
                                                            Margin="0,0,0,5"
                                                            Grid.Row="5" Grid.Column="1"></ig:XamNumericInput>
                                    </Grid>
                                </TabItem>

                                <TabItem Header="{Binding Source={StaticResource stringResources}, Path=ContextMenuConnectionHeaderText}">
                                    <Grid Margin="5" Name="StrokeGrid" Grid.IsSharedSizeScope="True">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" SharedSizeGroup="FirstColumnGroup"></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Row="0" Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Margin="0,0,5,5"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuLineStrokeText}"/>
                                        <ig:XamColorPicker Margin="0,0,0,5"
                                                           Grid.Row="0" Grid.Column="1"
                                                           SelectedColor="{Binding Path=Stroke, Converter={StaticResource brushToColorConverter}, Mode=TwoWay}"
                                                           Style="{StaticResource colorPickerStyle}">
                                        </ig:XamColorPicker>

                                        <TextBlock Grid.Row="1" Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Margin="0,0,5,5"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuLineThicknessText}"/>
                                        <ig:XamNumericInput Grid.Row="1" Grid.Column="1"
                                                            Margin="0,0,0,5"
                                                            Value="{Binding Path=StrokeThickness}"
                                                            Mask="{}{number:0-999999}"
                                                            SpinButtonDisplayMode="Always"></ig:XamNumericInput>

                                        <TextBlock Grid.Row="2" Grid.Column="0"
                                               VerticalAlignment="Center"
                                               Margin="0,0,5,0"
                                                   Text="{Binding Source={StaticResource stringResources}, Path=ContextMenuLineDashTypeText}"/>
                                        <ComboBox Grid.Row="2" Grid.Column="1"
                                                  Height="22"
                                                  ItemsSource="{TemplateBinding StrokeDashArrays}"
                                                  SelectedItem="{Binding Path=StrokeDashArray, Converter={StaticResource dashArrayConverter}}">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid Height="20">
                                                        <Line X1="0" X2="100" Y1="0.5" Y2="0.5" 
                                                              Stroke="Black"
                                                              StrokeDashArray="{Binding}"
                                                              SnapsToDevicePixels="True"
                                                              VerticalAlignment="Center"></Line>
                                                    </Grid>
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>

                                        <Grid Grid.Row="3" Grid.ColumnSpan="2"                                              
                                              Visibility="{Binding Mode, Converter={StaticResource connectionOptionsVisibilityConverter}, FallbackValue=Collapsed}">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                                <RowDefinition Height="Auto"></RowDefinition>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition></ColumnDefinition>
                                                <ColumnDefinition></ColumnDefinition>
                                            </Grid.ColumnDefinitions>

                                            <Rectangle Grid.Row="0" Grid.ColumnSpan="2"
                                                       VerticalAlignment="Bottom"
                                                       HorizontalAlignment="Stretch"
                                                       Height="1"
                                                       Fill="LightGray"
                                                       StrokeThickness="0"
                                                       Margin="0,10,0,10"></Rectangle>

                                            <Grid Grid.Row="1" Grid.ColumnSpan="2"
                                                  Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" SharedSizeGroup="FirstColumnGroup"></ColumnDefinition>
                                                    <ColumnDefinition></ColumnDefinition>
                                                    <ColumnDefinition></ColumnDefinition>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0" 
                                                           Text="{Binding Source={StaticResource stringResources}, Path=ConnectionText}"
                                                           Margin="0,0,5,0"
                                                           VerticalAlignment="Center"></TextBlock>

                                                <RadioButton Grid.Column="1"
                                                         Margin="0,0,2,0"
                                                         Height="22"
                                                         IsChecked="{Binding Path=ConnectionType, Converter={StaticResource connectionTypeConverter}, ConverterParameter={x:Static local:DiagramConnectionType.RightAngle}}"
                                                         Style="{StaticResource {x:Type ToggleButton}}"
                                                         Content="{Binding Source={StaticResource stringResources}, Path=ContextMenuConnectionTypeRightAngleText}">
                                                </RadioButton>
                                                <RadioButton Grid.Column="2"
                                                         Margin="2,0,0,0"
                                                         Height="22"
                                                         IsChecked="{Binding Path=ConnectionType, Converter={StaticResource connectionTypeConverter}, ConverterParameter={x:Static local:DiagramConnectionType.Straight}}"
                                                         Style="{StaticResource {x:Type ToggleButton}}"
                                                         Content="{Binding Source={StaticResource stringResources}, Path=ContextMenuConnectionTypeStraightText}">
                                                </RadioButton>
                                            </Grid>

                                            <ComboBox Grid.Row="2" Grid.Column="0"
                                                      Margin="0,0,2,5"
                                                      Height="22"
                                                      ItemsSource="{Binding Source={StaticResource capTypeEnum}}"
                                                      SelectedItem="{Binding StartCapType}">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid Height="18">
                                                            <local:DiagramConnection VerticalAlignment="Center"
                                                                                     Margin="10,8,0,0"
                                                                                     StartPosition="0,0"
                                                                                     EndPosition="55,0"
                                                                                     StartCapType="{Binding}"
                                                                                     StartCapSize="{Binding Converter={StaticResource capTypeToSizeConverter}}"
                                                                                     EndCapType="None"
                                                                                     Stroke="Black"
                                                                                     Fill="Black">
                                                            </local:DiagramConnection>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>

                                            <ComboBox Grid.Row="2" Grid.Column="1"
                                                      Margin="2,0,0,5"
                                                      Height="22"
                                                      ItemsSource="{Binding Source={StaticResource capTypeEnum}}"
                                                      SelectedItem="{Binding EndCapType}">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid Height="18">
                                                            <local:DiagramConnection VerticalAlignment="Center"
                                                                                     Margin="10,8,0,0"
                                                                                     StartPosition="0,0"
                                                                                     EndPosition="55,0"
                                                                                     StartCapType="None"
                                                                                     EndCapType="{Binding}"
                                                                                     EndCapSize="{Binding Converter={StaticResource capTypeToSizeConverter}}"
                                                                                     Stroke="Black"
                                                                                     Fill="Black">
                                                            </local:DiagramConnection>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>

                                            <ig:XamNumericInput Grid.Row="3" Grid.Column="0"
                                                                Margin="0,0,2,5"
                                                                Height="22"
                                                                Value="{Binding Path=StartCapSize}"
                                                                Mask="{}{number:0-999999}"
                                                                SpinButtonDisplayMode="Always"></ig:XamNumericInput>

                                            <ig:XamNumericInput Grid.Row="3" Grid.Column="1"
                                                                Margin="2,0,0,5"
                                                                Height="22"
                                                                Value="{Binding Path=EndCapSize}"
                                                                Mask="{}{number:0-999999}"
                                                                SpinButtonDisplayMode="Always"></ig:XamNumericInput>

                                        </Grid>
                                    </Grid>
                                </TabItem>

                                <TabItem Header="{Binding Source={StaticResource stringResources}, Path=ContextMenuTextHeaderText}">
                                    <Grid Margin="5">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                            <RowDefinition Height="Auto"></RowDefinition>
                                        </Grid.RowDefinitions>

                                        <TextBox Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"
                                                 IsReadOnly="{Binding IsContentReadOnly}"
                                                 Margin="0,0,0,5"
                                                 Grid.Row="0" Grid.Column="1"
                                                 Height="22"
                                                 IsEnabled="{Binding AllowEditResolved}"/>

                                        <Grid Grid.Row="1">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition></ColumnDefinition>
                                                <ColumnDefinition Width="50"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <ComboBox VerticalContentAlignment="Center"
                                                      Height="22"
                                                      SelectedItem="{Binding Path=FontFamily}">
                                                <ComboBox.Resources>
                                                    <CollectionViewSource x:Key="myFonts" Source="{Binding Source={x:Static Fonts.SystemFontFamilies}}">
                                                        <CollectionViewSource.SortDescriptions>
                                                            <ComponentModel:SortDescription PropertyName="Source" />
                                                        </CollectionViewSource.SortDescriptions>
                                                    </CollectionViewSource>
                                                </ComboBox.Resources>
                                                <ComboBox.ItemsSource>
                                                    <Binding Source="{StaticResource myFonts}" />
                                                </ComboBox.ItemsSource>

                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock FontFamily="{Binding Converter={StaticResource fontFamilyConverter}}" Text="{Binding Source}"
                                                                   VerticalAlignment="Center"/>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>

                                            <localPrim:AdvancedEditableComboBox Margin="5,0,0,0"
                                                      Grid.Column="1"
                                                      Height="22"
                                                      ItemsSource="{TemplateBinding FontSizes}"
                                                      Text="{Binding Path=FontSize, ValidatesOnDataErrors=True}"/>
                                        </Grid>

                                        <Grid Grid.Row="2" Grid.ColumnSpan="2"
                                              Margin="0,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                                <ColumnDefinition></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <ToggleButton FontWeight="Bold"
                                                          Grid.Column="0"
                                                          Width="22"
                                                          Height="22"
                                                          FontFamily="Callibri"
                                                          IsChecked="{Binding Path=IsBold}">B</ToggleButton>
                                            <ToggleButton FontStyle="Italic"
                                                          FontWeight="SemiBold"
                                                          Grid.Column="1"
                                                          Width="22"
                                                          Height="22"
                                                          Margin="5,0,0,0"
                                                          FontFamily="Times New Roman"
                                                          IsChecked="{Binding Path=IsItalic}">I</ToggleButton>
                                            <ig:XamColorPicker Grid.Column="2"
                                                               Margin="5,0,0,0"
                                                               SelectedColor="{Binding Path=FontBrush, Converter={StaticResource brushToColorConverter}, Mode=TwoWay}"
                                                               Style="{StaticResource colorPickerStyle}">
                                            </ig:XamColorPicker>
                                        </Grid>
                                    </Grid>
                                </TabItem>
                            </TabControl>

                            <Button VerticalAlignment="Top" HorizontalAlignment="Right"
                                    Margin="0,2,4,0"
                                    Height="17"
                                    Width="17"
                                    Command="local:DiagramCommands.CloseOptionsPane">
                                <Path Fill="Gray"
                                      Stretch="Fill"
                                      Width="10"
                                      Height="10"
                                      Data="M 25.5854 22.5647 L 22.5637 25.5833 C 22.0108 26.1389 21.107 26.1389 20.5514 25.5833 L 13.0014 18.0368 L 5.4508 25.5833 C 4.8965 26.1389 3.9913 26.1389 3.4384 25.5805 L 0.4146 22.5647 C -0.1382 22.0091 -0.1382 21.1088 0.4146 20.5504 L 7.9653 13.0011 L 0.4167 5.4531 C -0.1361 4.8961 -0.1361 3.9902 0.4167 3.4388 L 3.4384 0.4188 C 3.9913 -0.1396 4.8979 -0.1396 5.4508 0.4188 L 13 7.9682 L 20.5507 0.4188 C 21.107 -0.1396 22.0108 -0.1396 22.5616 0.4188 L 25.5833 3.4346 C 26.1382 3.9902 26.1382 4.8961 25.5854 5.4531 L 18.0361 13.0011 L 25.5854 20.5504 C 26.1382 21.1088 26.1382 22.0091 25.5854 22.5647 Z">
                                </Path>
                            </Button>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
